# VS Code 拡張機能「Chronolog」仕様

## 1. 概要

- **拡張機能名:** Chronolog
- **目的:** 独自形式の時系列メモファイル (`.clog`) を VS Code 内で効率的に作成・管理するための拡張機能。将来的にはタイムラインやグラフでの可視化・分析機能の追加を目指す。
- **ターゲットユーザー:**
  - VS Code ユーザー全般。
  - 特に、開発メモ、調査記録、研究ノート、プロジェクトログ、思考メモなどを、VS Code を使用しているプロジェクト内で直接、時系列に記録・管理したいユーザー。(`.clog` フォルダにファイルとしてメモが蓄積されるため、プロジェクト管理と親和性が高い)
- **開発言語:** TypeScript

## TypeScript 設定

- `tsconfig.json` で strict モードおよび厳格な型チェックオプションを有効化
  - `"strict": true`, `"noImplicitAny": true`, `"noUnusedLocals": true` など
- `"include": ["src"]` により、`src/` 配下のみを型チェック対象とする
- JavaScript ファイルも `"checkJs": true` で型チェック対象
- `"noEmit": true` でビルド時のファイル出力を禁止
- その他、詳細は `tsconfig.json` を参照

## 2. 機能仕様 (初期リリース範囲)

### 2.1. ワークスペース初期化機能

- **トリガー:** VS Code でワークスペース (フォルダ) が開かれた際に自動実行。
- **処理フロー:**
  1.  ワークスペースのルートディレクトリ直下に `.clog` という名称のフォルダが存在するか確認する。
  2.  `.clog` フォルダが存在しない場合、新規に作成する。
  3.  `.clog` フォルダ内に `memo` という名称のサブフォルダが存在するか確認する。
  4.  `memo` サブフォルダが存在しない場合、`.clog/memo/` パスに新規に作成する。
- **将来的な拡張:** 設定ファイルの格納など、`.clog` フォルダの役割を拡張する予定。

### 2.2. ChronologHomePanel（メモ入力・保存＋過去メモ一覧 UI）

- **UI形式:** VS Code のメインエディタ領域に表示される専用タブ（Webview を利用したカスタムUI）。
- **主要コンポーネント:**
  - **テキスト入力エリア (`textarea`):** 画面上部50%に表示。ユーザーが時系列メモの内容を入力する複数行テキストフィールド。
  - **保存ボタン (`button`):** テキスト入力エリア直下に配置。1文字以上入力時のみ活性化。
  - **過去のメモ一覧:** 画面下部50%に表示。.clog/memo フォルダ内のファイルを新しい順で最大10件、カード形式（shadow付き、幅100%、高さ固定、3行程度で省略表示）で一覧表示。各カードには1行目:日時、2行目:タイトル、3行目:本文（長文は...で省略）が表示される。スクロール可能。
- **データソース:** .clog/memo フォルダ配下の .clog ファイル群
- **備考:** ファイル名・クラス名は ChronologHomePanel に変更

### 2.3. ファイル保存処理

- **トリガー:** ユーザーが UI 上の送信ボタンをクリックし、かつテキスト入力エリアに1文字以上の入力がある場合。
- **処理内容:**
  1.  処理実行時の現在日時を取得する。
  2.  取得した日時を基に、`YYYYMMDDTHHmmss` の形式（例: `20250506T115608`）の文字列を生成する。
  3.  ファイル名を `<生成した日時文字列>.clog` とする (例: `20250506T115608.clog`)。
  4.  保存先ディレクトリを、ワークスペースルート直下の `.clog/memo/` とする。
  5.  テキスト入力エリアに入力されているテキストデータを、生成したファイル名で、指定された保存先ディレクトリにUTF-8エンコーディングのプレーンテキストファイルとして保存する。
- **ファイル形式:** `.clog` ファイル自体は、現時点では入力されたテキストデータのみを含むプレーンテキストファイルとする。

## 3. 将来的な拡張構想

- 設定ファイルや設定用フォルダの導入 (`.clog` 内)。
- 保存された `.clog` ファイル群の内容とタイムスタンプを解析し、タイムライン形式やグラフ形式で可視化するビュー機能。
- 既存の `.clog` ファイルを編集する機能。
- ファイル横断的なメモ内容の検索機能。
