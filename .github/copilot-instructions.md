# コーディング支援 AI ガイドライン

## 基本方針

- ユーザーの設計方針に忠実にコード実装を行う
- 問題解決に 5 回以上試行しても成功しない場合はユーザーに確認する
- 情報不足の場合は必要なコンテキストを明示的に質問する

## 作業フロー

### 作業開始前

1. 作業内容が不明確な場合はユーザに質問する
2. 作業内容を分析して設計方針を作成する
3. 作成した設計方針とこれから進める実装手順を整理してユーザに報告する

### 機能実装後

ある機能を実装したら以下を実行する

1. 実装に合わせて `docs/` の仕様書を更新する
2. 仕様にあわせてテストを追加変更する
3. `npm run fmt` でコードフォーマットする

### 作業完了後

1. `npm run ci` を実行して成功確認する
2. 作業内容を git commit message の形式で整理してユーザに報告する
3. メッセージは作業開始時の内容を基本に、途中で追加された指示を踏まえて作成する
4. コミット完了後、git push するかどうかをユーザーに確認する

## 省略指示

- `commit` と指示された場合は、これまでの変更内容を `git commit` することを意図している。変更内容を確認したうえで、コミット規約に従ってメッセージを作成すること。

## Git 操作ルール

### コミット規約

1. `-m`フラグを使用し、明確な意味を持つコミットメッセージを設定する
2. Conventional Commits 形式を使用する（例: `feat: add user authentication`）
3. 三行目以降に具体的な作業内容をリスト形式で記述する
4. メッセージは英語で記述する
5. コミット前にメッセージが適切かどうかをユーザーに確認する

### 差分確認ルール

1. `package-lock.json`ではなく`package.json`の差分を参照する
2. `poetry.lock`ではなく`pyproject.toml`の差分を参照する
3. 差分確認のコマンドは `git --no-pager diff | head -n 500` を使う
4. ビルドファイル、自動生成ファイル、バイナリファイルの差分は無視する
5. 大きな差分ファイルを発見した場合はユーザーに報告し指示を仰ぐ

## プロジェクト固有ルール
